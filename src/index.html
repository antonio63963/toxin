<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Toxin</title><link rel="stylesheet" type="text/css" href="pages/main/main.css"></head><body> <div class="header__wrapper"><header class="header"><img class="header__logo" src="./assets/svg/logo.svg" alt="toxin-logo"><nav class="header__nav"><ul class="nav-list"><li class="nav-list__link">О нас</li><li class="nav-list__link"><div class="nav-list__details">Услуги <img src="./assets/svg/expand_more.svg" alt="Список услуг"></div></li><li class="nav-list__link">Вакансии</li><li class="nav-list__link">Новости</li><li class="nav-list__link"> <div class="nav-list__details">Соглашения<img src="./assets/svg/expand_more.svg" alt="Список соглашений"></div></li></ul><button class="outlined-button header__login-button">Войти</button><button class="filled-button header__signUp-button">Зарегистрироваться</button><img class="nav-list__icon-burger" src="./assets/svg/burger.svg" alt="menu"></nav></header></div><div class="headline"><div class="search-form"><h2 class="search-form__title">Найдём номера под ваши пожелания</h2><div class="picker"> <div class="picker__select arive"><div class="picker__select_label">Прибытие</div><div class="picker__select_field"><span class="picker__select_date">ДД.ММ.ГГГГ</span><img src="assets/svg/expand_more.svg"></div></div><div class="picker__select leave"><div class="picker__select_label">Выезд</div><div class="picker__select_field"><span class="picker__select_date">ДД.ММ.ГГГГ</span><img src="assets/svg/expand_more.svg"></div></div><div class="calendar"> <div class="calendar__top"> <button class="text-button calendar__back"> <img class="calendar__prew-month" src="assets/svg/arrow_back.svg" alt="null"></button><h2 class="calendar__title">Month </h2><button class="text-button calendar__forward"> <img class="calendar__prew-month" src="assets/svg/arrow_forward.svg" alt="null"></button></div><div class="calendar__week"> <div class="calendar__week_day">Пн</div><div class="calendar__week_day">Вт</div><div class="calendar__week_day">Ср</div><div class="calendar__week_day">Чт</div><div class="calendar__week_day">Пт</div><div class="calendar__week_day">Сб</div><div class="calendar__week_day">Вс</div></div><div class="calendar__dates-row"> </div><div class="calendar__buttons-row"> <button class="text-button calendar__button-cancel">Очистить</button><button class="text-button calendar__button-submit">Применить</button></div></div></div><script> const datesRowElement = document.querySelector(".calendar__dates-row");
const monthForward = document.querySelector(".calendar__forward");
const monthBack = document.querySelector(".calendar__back");
const calendarTitle = document.querySelector(".calendar__title");
const selectDateElement = document.querySelector(".calendar__title");

const currentDate = new Date().getDate();
let currentMonth = new Date().getMonth();
let currentYear = new Date().getUTCFullYear();
let selectedMonth = currentMonth;
let selectedYear = currentYear;
let selectedDate = null;

console.log(currentYear, currentMonth, currentDate);

const monthes = [
  "Январь",
  "Февраль",
  "Март",
  "Апрель",
  "Май",
  "Июнь",
  "Июль",
  "Август",
  "Сентябрь",
  "Октябрь",
  "Ноябрь",
  "Декабрь",
];
const weekDays = ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"];

function compareDates(date1, date2) {
  return (
    date1.getDate() === date2.getDate() &&
    date1.getUTCFullYear() === date2.getUTCFullYear() &&
    date1.getMonth() === date2.getMonth()
  );
}

function getLastDayOfMonth(year, month) {
  let date = new Date(year, month, 0); // date from next month
  return date.getDate();
}

function getDateObj(year, monthIndex, dateDay) {
  const date = new Date(year, monthIndex, dateDay);
  return {
    date: date.getDate(),
    monthIndex: date.getMonth(),
    year: date.getUTCFullYear(),
  };
}

function getMonthDays(year, monthIndex) {
  const firstWeekDayIndex = new Date(year, monthIndex, 1).getDay();
  const calendarMonthDays = [];
  if (firstWeekDayIndex > 0) {
    const lastPrevMonthDate = getLastDayOfMonth(year, monthIndex);
    const prevMonthIndex = monthIndex - 1;
    for (let i = 0; i < firstWeekDayIndex - 1; i++) {
      calendarMonthDays.push(
        getDateObj(year, prevMonthIndex, lastPrevMonthDate - i)
      );
    }
  }
  // month days
  const lastMonthDay = getLastDayOfMonth(year, monthIndex);
  const nexMonthDaysAmount = 35 - lastMonthDay - calendarMonthDays.length;
  for (let i = 0; i < lastMonthDay + nexMonthDaysAmount; i++) {
    calendarMonthDays.push(getDateObj(year, monthIndex, 1 + i));
  }
  console.log("Month days: ", calendarMonthDays);
  return calendarMonthDays;
}

function insertDates(year, month) {
  function createDateElement(dateObject) {
    const dateContainer = document.createElement("div");
    dateContainer.classList.add("date-container");
    const dateBg = document.createElement("div");
    const dateValue = document.createElement("span");
    dateValue.textContent = dateObject.date;
    dateBg.classList.add("date-container__bg");

    if (dateObject.monthIndex !== selectedMonth) {
      dateBg.classList.add("date-container__extra-days");
    } else {
      dateBg.classList.add("date-container__month-days");
    }
    if (
      dateObject.year == currentYear &&
      dateObject.monthIndex == currentMonth &&
      dateObject.date == currentDate
    ) {
      dateBg.classList.add("date-container__current-date");
    }
    if (
      selectedDate != null &&
      dateObject.year == selectedDate.getUTCFullYear() &&
      dateObject.monthIndex == selectedDate.getMonth() &&
      dateObject.date == selectedDate.getDate()
    ) {
      dateBg.classList.add("date-container__selected-date");
    }
    dateBg.appendChild(dateValue);
    dateContainer.appendChild(dateBg);
    return dateContainer;
  }

  datesRowElement.textContent = "";
  getMonthDays(year, month).forEach((date) => {
    datesRowElement.appendChild(createDateElement(date));
  });
  calendarTitle.textContent = `${monthes[month]} ${year}`;
}

// Handlers

function onForwardMonth() {
  selectedMonth++;
  insertDates(selectedYear, selectedMonth);
}
function onBackMonth() {
  if (selectedMonth == currentMonth) return;
  selectedMonth--;
  insertDates(selectedYear, selectedMonth);
}
function onAriveDate(e) {
  const targetDate = new Date(
    selectedYear,
    selectedMonth,
    e.target.textContent
  );
  selectedDate =
    selectedDate != null && compareDates(selectedDate, targetDate)
      ? null
      : targetDate;
  const bgElement = e.target.classList.toggle(".date-container__bg");
  insertDates(selectedYear, selectedMonth);
}

monthForward.addEventListener("click", onForwardMonth);
monthBack.addEventListener("click", onBackMonth);
datesRowElement.addEventListener("click", onAriveDate);

insertDates(selectedYear, selectedMonth);
</script></div><p class="headline__text">Лучшие номера для вашей работы, отдыха и просто вдохновения</p></div><script src="index.js"></script></body></html>